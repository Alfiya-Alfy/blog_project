{% extends 'blogapp/base.html' %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}
<h2>Admin Dashboard</h2>

<h4>Users</h4>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Active</th>
            <th>Toggle</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.is_active }}</td>
            <td>
                <form method="post" action="{% url 'toggle-user' user.id %}">
                    {% csrf_token %}
                    <button class="btn btn-sm {% if user.is_active %}btn-danger{% else %}btn-success{% endif %}">
                        {% if user.is_active %}Block{% else %}Unblock{% endif %}
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h4 class="mt-5">Posts</h4>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Created</th>
        </tr>
    </thead>
    <tbody>
        {% for post in posts %}
        <tr>
            <td><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></td>
            <td>{{ post.author.username }}</td>
            <td>{{ post.created_at }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
